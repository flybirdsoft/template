/*
write by : wuweiwei
github   : www.github.com/flybirdsoft
blogs    : www.cnblogs.com/wsoft
company  : 360
*/
!function(t){var e={_startSymbol:"\\${",_endSymbol:"}",templateElement:{},contentNode:null};e.startSymbol=function(t){var e,n="",i="^$*+?{}[]|.";for(e=0;e<t.length;e++)i.indexOf(t.substr(e,1))>=0&&(n+="\\"),n+=t.substr(e,1);this._startSymbol=n},e.endSymbol=function(t){var e,n="",i="^$*+?{}[]|.";for(e=0;e<t.length;e++)i.indexOf(t.substr(e,1))>=0&&(n+="\\"),n+=t.substr(e,1);this._endSymbol=t},e.repeat=function(t){if(void 0==t.data)throw new Error("参数名称不对,参数是{},缺少data");if(void 0==t.repeatId&&void 0==t.repeatElement)throw new Error("参数名称不对,参数是{},缺少repeatElement或repeatId");var n,i,o,r,l,a,s,r,d,p,m,b={string:""},g=[],c=0,y=null,u=null,f=function(){},h={},v={},S=null,_="";for(l=t.repeatElement||$(t.repeatId)[0],a=l.parentNode,(void 0==t.type||void 0!=t.type&&"cover"==t.type)&&e.deleteNode(l),void 0==t.template&&(t.template=l.innerHTML),void 0==t.data.length?(c=1,g[0]=t.data):(c=t.data.length,g=t.data),void 0!=t.count&&t.count<=c&&(c=t.count),void 0!=t.process&&(f=t.process||t.onprocess),y=l,u=a.lastChild,n=c-1;n>=0;n--){for(h={index:n,item:g[n]},s=f.call(this,h),S=document.createElement(l.nodeName),i=0;i<l.attributes.length;i++){_=l.attributes.item(i).value;for(r in s)p=this._startSymbol+r+this._endSymbol,m=new RegExp(p,"g"),_=_.replace(m,s[r]);S.setAttribute(l.attributes.item(i).name,_)}b.string=t.template,o=g[n];for(r in s)"object"!=typeof s[r]?(p=this._startSymbol+r+this._endSymbol,m=new RegExp(p,"g"),b.string=b.string.replace(m,s[r])):e.getScope(s,r,b);for(r in o)"object"!=typeof o[r]?(p=this._startSymbol+r+this._endSymbol,m=new RegExp(p,"g"),b.string=b.string.replace(m,o[r])):e.getScope(o,r,b);S.innerHTML=b.string,void 0!=t.type&&"append"==t.type?(a.insertBefore(S,u.nextSibling),S.style.display="block",S.setAttribute("templateItem","templateItem"),S=u):(a.insertBefore(S,y.nextSibling),S.style.display="block",S.setAttribute("templateItem","templateItem"))}l.style.display="none",void 0!=t.bind&&(v.target=$(t.id)[0],v.data=t.data,v.template=t.template,v.id=t.id,d=t.bind.call(this,v))},e.getScope=function(t,e,n,i){var o,r,l="";if(r=t[e],"object"==typeof r){l=void 0==i?e:i;for(o in r){if(l+="."+o,"object"==typeof r[o])return void this.getScope(r,o,n,l);strV=this._startSymbol+l+this._endSymbol,reg=new RegExp(strV,"g"),n.string=n.string.replace(reg,r[o])}}},e.deleteNode=function(t){for(var e,n=t.nextSibling,i=1==n.nodeType&&"templateItem"==n.getAttribute("templateItem")||1!=n.nodeType;null!=n&&i;)e=n.nextSibling,n.parentNode.removeChild(n),n=e},t.T=t.template=e}(window);